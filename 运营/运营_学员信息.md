# 运营页面

## 前端

运营端页面按四个大模块来设计：

1. 学员信息中心（查询、导入、编辑）
2. 运营任务（回访、任务清单）
3. 学员监控（漏评检测、干预名单）
4. 内部沟通（消息、公告）

## 管理模块需求

### 模块1. 学员信息管理模块

#### 1.1: 学员列表展示

【查询】以列表形式展示系统内所有学员。

【显示出来的字段】有等级，优先级别：
1. 一级窗口：昵称，分组，进度（第几课）,学员状态
点击学员昵称可以进入单独的学员详情页，展示该学员的所有学习记录以及回访记录。
教研备注，运营备注,历史点评记录，点评备注，回访记录, 小鹅通id，注册时间，累计学习时长

【搜索】支持通过“昵称”或“备注名”，“用户ID”进行模糊搜索。
【排序】支持通过“进度”，“被精选数”，“累计学习时长”进行排序。
【操作】每行提供“编辑”按钮，点击进入学员详情编辑页。更新学员昵称，更新备注名，更新分组，增加运营备注。


#### 1.2: 学员基本信息编辑 (Create/Update Student)

- 支持手动创建新学员，需要填写至少“用户ID”，“昵称”
- 支持编辑已有学员信息，可修改字段包括：
  - 备注名: 记录学生原来的名字。
  - 分组: 可以从一个预设的下拉列表（基础班，中级班，高级版，视唱练耳）中选择，支持多选。
  - 运营备注: 一个大的文本框，用于记录跟进情况等。
  - 学员状态: 可选值：加入，活跃, 已毕业，已归档。已毕业，归档后的学员默认不在列表页显示。

#### 1.3: 批量导入学员 (Batch Import)

- 入口: 在学员列表页点击“批量导入学员”按钮，弹出一个文件上传窗口。
- 操作: 运营人员上传从“小鹅通app”导出的 XLSX 文件。
- 数据模型: 数据库 Student 表需包含字段：external_user_id (对应小鹅通的用户ID，唯一索引), nickname, remark_name, groups(default:基础班)， status（default:加入）, learning_progress(int)，notes（String，分教研和运营的备注。default: null ）
- 核心处理逻辑 (The Logic):
  1. 文件校验: 系统首先检查文件后缀是否为 .xlsx，格式是否正确。若不正确，立即提示错误。
  2. 数据读取与比对: 系统逐行读取 XLSX 文件。对每一行，用“用户ID”去数据库的 external_user_id 字段中查找。
  3. 处理规则:
     - 情况A：数据库中不存在该 UserID: 判定为新学员。将该行的“用户ID”和“昵称”存入数据库，创建一个新的学员记录。
     - 情况B：数据库中已存在该 UserID: 判定为已有学员。执行 更新操作：仅当 XLSX 文件中的“昵称”与数据库中该学员的“昵称”不一致时，才更新数据库中的“昵称”字段。其他字段（如备注名、分组）不受此次导入影响。
  4. 异常处理: 如果某行数据缺少“用户ID”，则跳过该行，并在最终报告中记录为失败条目。
  5. 完成反馈: 导入流程结束后，前端页面需要给与明确的弹窗反馈，内容包括：“导入任务完成！成功新增学员 X 名，成功更新学员 X 名，失败或跳过 X 行。” 并提供一个“查看详情”链接，点击后可以下载一份记录了失败原因的日志文件。
### 模块2.运营任务管理
核心职责：运营人员跟进、联系和回访学员。
#### 2.1 回访待办事项
回访待办事项有两个来源 
1. 教师端和教研端内部推送（注明来源，教师-黄老师，教研-王老师）
2. 运营老师手动添加待办实行
以表格的形式展示系统内所有的回访待办事项。
【显示出来的字段】有：1.学生昵称 2. 分组 3. 学员状态 4.进度（第几课）5. 来源（教师-黄老师，教研-王老师）
然后点击学员昵称可以进入单独的学员详情页，展示该学员的所有学习记录以及回访记录。
有可以选择处理情况的下拉列表，可选值：待办，已联系，已回复，未回复，已关闭。当选择已关闭时，该回访记录会被标记为已关闭，不会再出现在待办列表中。
#### 2.2 回访记录展示与管理
【查询】以列表形式展示系统内所有的学员回访记录。
【显示出来的字段】有：
1. 回访记录ID 2. 学生昵称 3. 学生备注名 4. 回访时间 5. 回访状态（待办，已联系，已回复，未回复，已关闭）7.任课老师 8. 回访记录（大的文本框）
【操作】每行提供“编辑”按钮，点击进入回访记录详情编辑页。更新回访记录状态，添加回访记录。
上方有一个”推送教务“按钮，可将选中的记录推送给教务端。点击后，会将选中的记录发送到教务端的指定队列中，等待处理。也可以有一个推送老师端的按钮，将选中的记录推送给指定老师端（下拉选择老师）。
【筛选】支持通过“回访状态”进行筛选。
【排序】支持通过“回访时间”进行排序。  


