## 1. 功能概览
教学点评模块为教师提供教学任务管理和学员点评的集成界面，包含任务管理、公告栏、点评功能、推送功能、已点评内容查看，以及手动点评功能。

---

## 1.1 主控制面板（Dashboard）
- **位置**：教师的默认主页，访问路径 `/teaching/`
- **内容分为三个区域**：
  1. **公告通知区**：
     - 显示来自教研的推送备注（`push_research`）
     - 显示来自运营的推送备注（`push_ops`）
     - 按类型分组展示，自动去重
 
  2. **快速操作**：
     - 更新今日任务按钮
     - 手动添加点评入口
     - 学员搜索功能

---

## 1.2 任务管理功能
### 1.2.1 今日任务获取 (GET `/teaching/tasks/today/`)
- **功能**：从教研端拉取分配给当前教师的教学任务
- **数据来源**：`TeachingTask` 模型，筛选当前教师且状态为待处理/进行中的任务

### 1.2.2 添加今日任务 (POST `/teaching/tasks/add/`)
- **功能**：手动添加学员到今日任务列表
- **输入参数**：学员ID列表
- **权限**：仅教师角色

### 1.2.3 批量删除任务 (POST `/teaching/tasks/delete/`)
- **功能**：批量移除已选中的任务
- **支持**：多选操作

---

## 1.3 点评功能 
### 1.3.1 提交点评 (POST `/teaching/feedback/submit/`)
- **输入字段**：
  - 学员ID (`user_id`)
  - 学员昵称 (`student_name`)
  - 学习进度 (`progress`)：支持多个进度点，如 `[5.1, 5.2, 7]`
  - 教师评语 (`teacher_comment`) ：可选
  - 推送教研备注 (`push_research`)：可选
  - 推送运营备注 (`push_ops`)：可选

### 1.3.2 手动点评 (POST `/teaching/feedback/manual/`)
- **功能**：不依赖教研任务分配，直接对学员进行点评
- **输入内容**：
  - 学员昵称（支持模糊匹配）
  - 学习进度
  - 点评内容
- **验证**：自动验证学员是否存在于系统中

---

## 1.4 推送功能
### 1.4.1 推送到教研 (POST `/teaching/push/research/`)
- **功能**：将问题学员信息推送给教研部门
- **字段**：推送教研备注、学员基本信息

### 1.4.2 推送到运营 (POST `/teaching/push/operation/`)
- **功能**：将需要跟进的学员推送给运营部门
- **字段**：推送运营备注、学员基本信息
- **自动化**：系统将创建对应的 `OpsTask` 记录

---

## 1.5 已点评内容查看 (GET `/teaching/feedback/completed/`)
- **展示形式**：分页列表
- **排序**：按点评时间倒序
- **字段**：
  - 学员昵称
  - 点评时间 (`reply_time`)
  - 学习进度 (`progress`)
  - 教师评语 (`teacher_comment`)
  - 推送状态（是否有推送教研/运营备注）
- **作用**：方便教师回顾历史点评内容，录制视频时参考

---

## 1.6 学员管理功能
### 1.6.1 学员搜索 (GET `/teaching/students/search/`)
- **搜索方式**：
  - 学员昵称模糊匹配
  - 学员ID精确匹配
- **返回信息**：学员基本信息、当前学习进度、最新点评记录

### 1.6.2 学员详情 (GET `/teaching/students/<student_id>/`)
- **展示内容**：
  - 学员基本信息（昵称、分组、状态）
  - 学习进度历史
  - 历史点评记录
  - 困难学生标识（`is_difficult`）

---

## 1.7 权限与角色控制
- **访问权限**：仅限教师角色 (`roles` 包含 `teacher`)
- **数据隔离**：教师只能查看和操作分配给自己的任务和点评记录
- **安全验证**：所有 API 接口都需要登录验证

---

## 1.8 状态标识与UI优化
- **困难学生标识**：`student.is_difficult = True` 的学员在列表中以特殊样式（如橙色背景）显示
- **任务状态**：
  - 待处理：白色背景
  - 已完成：浅绿色背景
- **响应式设计**：支持移动端操作

---

## 1.9 数据同步机制
- **学习进度同步**：提交点评后自动更新 `Student.progress` 字段
- **教师统计**：点评数据自动纳入教师绩效统计
- **任务状态更新**：完成点评后相关 `TeachingTask` 状态自动更新为已完成


