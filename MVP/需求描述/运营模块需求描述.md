# 运营端模块设计文档

---

## 模块1. 学员信息管理模块

### 1.1 学员列表展示
- **查询**：以列表形式展示系统内所有学员。  
- **显示字段（分优先级）**：  
  - 一级窗口：昵称，分组，进度（第几课），学员状态  
  - 学员详情页字段：教研备注，运营备注，历史点评记录，点评备注，回访记录，小鹅通 ID，注册时间，累计学习时长  
- **搜索**：支持通过“昵称/备注名”，“用户ID”进行模糊搜索。  
- **排序**：支持通过“进度”，“被精选数”，“累计学习时长”进行排序。  
- **操作**：每行提供“编辑”按钮，可进入学员详情编辑页，更新以下信息：  
  - 学员昵称  
  - 备注名  
  - 分组  
  - 运营备注  

---

### 1.2 学员基本信息编辑 (Create/Update Student)
- **新建学员**：至少填写“用户ID”，“昵称”。  
- **可编辑字段**：  
  - 备注名  
  - 分组（预设下拉列表：基础班，中级班，高级版，视唱练耳；支持多选）  
  - 运营备注（大文本框）  
  - 学员状态（可选：加入，活跃，已毕业，已归档；毕业和归档学员默认不显示在列表页）  

---

### 1.3 批量导入学员 (Batch Import)
- **入口**：在学员列表页点击“批量导入学员”按钮，上传 XLSX 文件。  
- **数据模型**：  
  - external_user_id（小鹅通 ID，唯一索引）  
  - student_name
  - groups（default: 基础班）  
  - status（default: 加入）  
  - learning_progress（int）  
  - notes（字符串，分教研/运营备注，default: null）  
- **核心逻辑**：  
  1. 校验：检查文件后缀是否为 .xlsx，格式是否正确。  
  2. 读取与比对：逐行读取，用“用户ID”匹配 external_user_id。  
  3. 处理规则：  
     - A. 数据库不存在该用户 → 新建学员记录。  
     - B. 已存在该用户 → 更新昵称（仅当不同）。  
  4. 异常：缺少“用户ID”的行 → 跳过，并记录到导入报告。  
  5. 反馈：完成后弹窗提示 → 新增数 / 更新数 / 失败数，并可下载失败日志。  

---

## 模块2. 运营任务管理模块

### 2.1 运营待办事项
- **来源**：  
  1. 教师端推送 → 本周点评名单中“推送运营备注”不为 null 的学生  
  2. 系统规则推送：  
     - 三周未回课学员  
     - 同一作业三次及以上未通过学员  
  3. 教务推送  
  4. 手动添加（通过学员信息搜索框）  

- **展示字段**：  
  1. 学生昵称  
  2. 分组  
  3. 学员状态  
  4. 进度（第几课）  
  5. 回访次数  
  6. 推送来源  
  7. 处理情况（待办/已联系/未回复/已关闭）  
    - 标记为“已关闭”后不再显示在待办列表中  

- **操作**：  
  - 每行有“编辑”按钮，可进入回访详情页，更新回访状态/添加回访记录  
  - 点击学员昵称 → 进入学员详情页，查看学习记录与回访记录  

---

### 2.2 回访记录管理
- **查询**：以列表形式展示系统内所有回访记录。  
- **展示字段**：  
  1. 回访记录ID  
  2. 学生昵称  
  3. 回访时间  
  4. 回访状态（待办/已联系/未回复/已关闭）  
  5. 回访次数  
  6. 任课老师  
  7. 回访记录  
- **操作**：  
  - 每行有“编辑”按钮，可进入详情页，更新回访状态/添加记录  
- **筛选**：支持通过“回访状态”筛选  
- **排序**：支持通过“回访时间”排序  
- **导出**：支持导出为 PDF 或 XLSX  

---
