## 1. 教学任务分配（/research/tasks/）

### 1.1 手动分配与创建任务
- **操作流程**：
  1. 选择教师（从用户列表中过滤角色包含 `teacher` 的用户）
  2. 输入学员名字（支持模糊匹配），每个学员可填写任务备注
  3. 支持批量输入（15-30 名学员）
  4. 支持删除行、查看学员详情
- **提交**：点击“确认”后创建 `TeachingTask` 记录，默认状态为 `pending`

### 1.2 历史任务与复用
- **路径**：`/research/tasks/history/` 与 `/research/tasks/history/api/`
- **功能**：
  - 查看最近的任务分配记录(以老师为单位)
  - 直接对历史记录进行删除/增加操作
  - 通过“复用”功能将历史记录再次分配（`/research/tasks/use-history/<task_id>/`）

### 1.3 任务删除
- **路径**：`/research/tasks/delete/<task_id>/`
- **功能**：删除指定任务记录

### 1.4 任务导出
- **路径**：`/research/tasks/export/`
- **功能**：按教师、起止时间筛选导出任务分配结果为 PDF

---

## 2. 教学质量监控（/research/quality/）

### 2.1 质量监控主页
- **路径**：`/research/` 或 `/research/quality/`
- **权限**：`roles` 包含 `researcher` 的用户
- **展示**：
  - 当前用户信息
  - 教师列表（角色包含 `teacher`）
  - 学员分组列表（源自 `Student.GROUP_CHOICES`）
  - 重点学员关注列表: 来自教师端推送的问题学员点评记录
  

### 2.2 点评记录监控
- **路径**：`/research/quality/feedback/`
- **功能**：查看本周或指定范围内的点评记录，支持：
  - 关键词搜索（学员昵称/老师评语）
  - 条件筛选（分组、点评老师、课程范围）
  - 选择记录加入重点学员关注列表

### 2.3 学员搜索与详情
- **搜索路径**：`/research/quality/students/search/`
- **详情路径**：`/research/quality/students/<student_id>/`
- **功能**：
  - 根据昵称/ID 搜索学员
  - 进入学员详情页查看基本信息、学习进度、最近点评
  - 更新“教研备注”：`/research/quality/students/<student_id>/note/`
  - 标记困难学生（`is_difficult=True`）

### 2.4 教师统计
- **路径**：`/research/teachers/stats/`
- **功能**：按教师统计点评量、分配任务完成率等核心指标

---

## 3. 权限与安全
- 仅 `researcher` 角色可访问研究端页面与接口
- 所有接口要求登录
- 对列表、导出等接口提供分页与时间范围限制，避免一次性返回过多数据

---

## 4. 数据同步与一致性
- 点评提交后，`Student.progress` 与最新 `Feedback.progress` 保持同步
- 重点关注学员列表实时读取 `Student.is_difficult` 与最近点评
- 任务导出时使用统一时区处理（区间为 [start_date, end_date+1)）

