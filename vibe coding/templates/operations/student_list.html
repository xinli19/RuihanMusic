{% extends 'base.html' %}
{% load static %}

{% block title %}å­¦å‘˜ä¿¡æ¯ç®¡ç† - ç¿æ¶µéŸ³ä¹åå°{% endblock %}

{% block page_title %}å­¦å‘˜ä¿¡æ¯ä¸­å¿ƒ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/operations.css' %}">
<link rel="stylesheet" href="{% static 'css/teaching.css' %}?v=dev2">
{% endblock %}

{% block content %}
<div class="operations-container">
    <div class="module-tabs">
        <div class="tabs">
            <div class="tab-header">
                <button class="tab-button active" data-tab="studentManagement" type="button">å­¦å‘˜ä¿¡æ¯ç®¡ç†</button>
                <button class="tab-button" data-tab="opsTaskManagement" type="button">è¿è¥ä»»åŠ¡ç®¡ç†</button>
            </div>

            <div id="studentManagement" class="tab-pane active">
                <!-- å­¦å‘˜ä¿¡æ¯ç®¡ç†ï¼šæ”¹ä¸ºé€šç”¨æœç´¢ + ç›´æ¥ç¼–è¾‘ï¼Œä¸å†å±•ç¤ºåˆ—è¡¨é¡µ -->
                <div class="toolbar">
                    <div class="search-section">
                        <input type="text" id="student-mgr-search" class="search-input" placeholder="æœç´¢å­¦å‘˜æ˜µç§°ã€å¤‡æ³¨å...">
                        <button type="button" class="btn btn-primary" id="student-mgr-search-btn">æœç´¢</button>
                    </div>
                    <div class="actions-section">
                        <button class="btn btn-success" onclick="openAddStudentModal()">æ·»åŠ å­¦å‘˜</button>
                        <button class="btn btn-info" onclick="openBatchImportModal()">æ‰¹é‡å¯¼å…¥</button>
                        <button class="btn btn-warning" onclick="exportStudents()">å¯¼å‡ºæ•°æ®</button>
                    </div>
                </div>
                <div id="student-mgr-results" class="table-container" style="margin-top:8px;"></div>
            </div>

            <!-- è¿è¥ä»»åŠ¡ç®¡ç† Tab -->
            <div id="opsTaskManagement" class="tab-pane">
                <div class="toolbar">
                    <!-- ä¸‹çº¿æœç´¢æ¡†ï¼šåˆ é™¤æœç´¢åŒºåŸŸï¼Œä»…ä¿ç•™æ‰¹é‡æ“ä½œ -->
                    <div class="actions-section">
                        <button class="btn btn-danger" id="ops-batch-delete" disabled>æ‰¹é‡åˆ é™¤</button>
                        <button class="btn btn-info" id="ops-export" disabled>å¯¼å‡ºåˆ—è¡¨</button>
                    </div>
                </div>

                <!-- åˆ é™¤ï¼šops-student-results æœç´¢ç»“æœå®¹å™¨ -->
                <div id="ops-task-list" class="table-container">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ—‚ï¸</div>
                        <p>è¿è¥ä»»åŠ¡åˆ—è¡¨åŠ è½½ä¸­/æˆ–æš‚æ— æ•°æ®</p>
                    </div>
                </div>
                <div id="ops-task-pagination" class="pagination"></div>
            </div>
        </div>
    </div>
</div>

<!-- å­¦å‘˜è¯¦æƒ…æŠ½å±‰ä¿ç•™ -->
<div id="studentDetailDrawerMask" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.35); z-index: 1999;"></div>
<div id="studentDetailDrawer" style="display:none; position:fixed; top:0; right:0; bottom:0; width:560px; background:#fff; box-shadow:-2px 0 12px rgba(0,0,0,0.2); z-index: 2000; overflow:auto;">
    <div id="studentDetailDrawerContent"></div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/operations.js' %}"></script>
{% endblock %}