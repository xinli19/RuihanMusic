{% extends 'base.html' %}
{% load static %}

{% block title %}学员信息管理 - 睿涵音乐后台{% endblock %}

{% block page_title %}学员信息中心{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/operations.css' %}">
<link rel="stylesheet" href="{% static 'css/teaching.css' %}?v=dev2">
{% endblock %}

{% block content %}
<div class="operations-container">
    <div class="module-tabs">
        <div class="tabs">
            <div class="tab-header">
                <button class="tab-button active" data-tab="studentManagement" type="button">学员信息管理</button>
                <button class="tab-button" data-tab="opsTaskManagement" type="button">运营任务管理</button>
            </div>

            <div id="studentManagement" class="tab-pane active">
                <!-- 学员信息管理：改为通用搜索 + 直接编辑，不再展示列表页 -->
                <div class="toolbar">
                    <div class="search-section">
                        <input type="text" id="student-mgr-search" class="search-input" placeholder="搜索学员昵称、备注名...">
                        <button type="button" class="btn btn-primary" id="student-mgr-search-btn">搜索</button>
                    </div>
                    <div class="actions-section">
                        <button class="btn btn-success" onclick="openAddStudentModal()">添加学员</button>
                        <button class="btn btn-info" onclick="openBatchImportModal()">批量导入</button>
                        <button class="btn btn-warning" onclick="exportStudents()">导出数据</button>
                    </div>
                </div>
                <div id="student-mgr-results" class="table-container" style="margin-top:8px;"></div>
            </div>

            <!-- 运营任务管理 Tab -->
            <div id="opsTaskManagement" class="tab-pane">
                <div class="toolbar">
                    <!-- 下线搜索框：删除搜索区域，仅保留批量操作 -->
                    <div class="actions-section">
                        <button class="btn btn-danger" id="ops-batch-delete" disabled>批量删除</button>
                        <button class="btn btn-info" id="ops-export" disabled>导出列表</button>
                    </div>
                </div>

                <!-- 删除：ops-student-results 搜索结果容器 -->
                <div id="ops-task-list" class="table-container">
                    <div class="empty-state">
                        <div class="empty-state-icon">🗂️</div>
                        <p>运营任务列表加载中/或暂无数据</p>
                    </div>
                </div>
                <div id="ops-task-pagination" class="pagination"></div>
            </div>
        </div>
    </div>
</div>

<!-- 学员详情抽屉保留 -->
<div id="studentDetailDrawerMask" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.35); z-index: 1999;"></div>
<div id="studentDetailDrawer" style="display:none; position:fixed; top:0; right:0; bottom:0; width:560px; background:#fff; box-shadow:-2px 0 12px rgba(0,0,0,0.2); z-index: 2000; overflow:auto;">
    <div id="studentDetailDrawerContent"></div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/operations.js' %}"></script>
{% endblock %}